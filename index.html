
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Crypto Garten</title>
  <link rel="stylesheet" href="style.css" />
  <script src="https://cdn.jsdelivr.net/npm/web3@latest/dist/web3.min.js"></script>
</head>
<body>
  <header>
    <img src="logo.png" alt="Garten Logo" class="logo" />
    <h1>Crypto Garten</h1>
    <p>The Green Crypto Revolution Starts Here</p>
    <a href="Cryptogarten_Whitepaper.pdf" target="_blank" class="btn">Read Whitepaper</a>
  </header>

  <section>
    <h2>Buy $GARTEN Tokens</h2>
    <button id="buyButton" class="btn">Buy with MetaMask</button>
    <p>Don't have MetaMask? <a href="mailto:crypto_garten@hotmail.com">Contact us</a> to buy manually.</p>
    <p id="status"></p>
  </section>

  <section>
    <h2>Claim Your Free Airdrop</h2>
    <button id="claimAirdrop" class="btn secondary">Claim Airdrop</button>
    <p id="claimStatus"></p>
  </section>

  <footer>
    <p>&copy; 2025 Crypto Garten | Contact: crypto_garten@hotmail.com</p>
  </footer>

  <script>
    const presaleAddress = "0xffbC6fAac4fC3ebfFD2EDBE6c5C697F958b12F35";
    const airdropAddress = "0xbE9DD05de62094a885dB6fD202c81232805d3520";
    const airdropABI = [{"inputs":[],"name":"claim","outputs":[],"stateMutability":"nonpayable","type":"function"}];

    document.getElementById("buyButton").onclick = async () => {
      if (!window.ethereum) return alert("MetaMask not found");
      const web3 = new Web3(window.ethereum);
      const accounts = await window.ethereum.request({ method: 'eth_requestAccounts' });
      const amount = web3.utils.toWei("0.01", "ether");
      document.getElementById("status").innerText = "Sending...";
      try {
        await web3.eth.sendTransaction({ from: accounts[0], to: presaleAddress, value: amount });
        document.getElementById("status").innerText = "✅ Purchase successful!";
      } catch (e) {
        document.getElementById("status").innerText = "❌ Transaction failed.";
      }
    };

    document.getElementById("claimAirdrop").onclick = async () => {
      if (!window.ethereum) return alert("MetaMask not found");
      const web3 = new Web3(window.ethereum);
      const accounts = await window.ethereum.request({ method: 'eth_requestAccounts' });
      const contract = new web3.eth.Contract(airdropABI, airdropAddress);
      document.getElementById("claimStatus").innerText = "Processing...";
      try {
        await contract.methods.claim().send({ from: accounts[0] });
        document.getElementById("claimStatus").innerText = "✅ Airdrop claimed!";
      } catch (e) {
        document.getElementById("claimStatus").innerText = "❌ Already claimed or error.";
      }
    };
  </script>
</body>
</html>
